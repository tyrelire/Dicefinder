{% extends 'base.html.twig' %}

{% block title %}Mon Profil{% endblock %}

{% block body %}
<div class="container mx-auto px-4 py-8">
    <div class="grid grid-cols-4 sm:grid-cols-12 gap-6 px-4">
        <div class="col-span-4 sm:col-span-3">
            <div class="bg-white shadow rounded-lg p-6">
                <div class="flex flex-col items-center">
                    {% if app.user.avatar %}
                        <img src="{{ asset('uploads/avatars/' ~ app.user.avatar) }}" class="w-32 h-32 bg-gray-300 rounded-full mb-4 shrink-0" alt="Photo de profil">
                    {% else %}
                        <img src="{{ asset('images/default-avatar.png') }}" class="w-32 h-32 bg-gray-300 rounded-full mb-4 shrink-0" alt="Photo de profil par défaut">
                    {% endif %}
                    <h1 class="text-xl font-bold">{{ app.user.username }}</h1>
                    {# <div class="mt-4 mb-6 text-center">
                        <span class="text-gray-700 text-lg font-bold">Niveau</span>
                        <span class="text-indigo-600 text-xl font-extrabold">{{ app.user.level|default('1') }}</span>
                    </div> #}
                    <p class="text-gray-700">
                        {% if is_granted('ROLE_MJ') and is_granted('ROLE_JOUEUR') %}
                            Maître du Jeu & Joueur
                        {% elseif is_granted('ROLE_MJ') %}
                            Maître du Jeu
                        {% elseif is_granted('ROLE_JOUEUR') %}
                            Joueur
                        {% else %}
                            Aucun rôle attribué
                        {% endif %}
                    </p>
                    <div class="mt-6 flex flex-wrap gap-4 justify-center">
                        {# <a href="{{ path('app_join_game') }}" class="bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded">Rejoindre une partie</a>
                        <a href="{{ path('app_create_game') }}" class="bg-indigo-500 hover:bg-indigo-600 text-white py-2 px-4 rounded">Créer une campagne</a> #}
                    </div>
                </div>
                <hr class="my-6 border-t border-gray-300">
                <div class="flex flex-col mb-6">
                    <span class="text-gray-700 uppercase font-bold tracking-wider mb-2">Contact</span>
                    <ul>
                        <li class="mb-2">Discord</li>
                        <li class="mb-2">X / Twitter</li>
                        <li class="mb-2">Roll 20</li>
                        <li class="mb-2">Youtube</li>
                        <li class="mb-2">Twitch</li>
                    </ul>
                </div>
                <div class="flex flex-col mb-6">
                    <span class="text-gray-700 uppercase font-bold tracking-wider mb-2">Compétences</span>
                    {# <ul>
                        <li class="mb-2">Expert Narration</li>
                        <li class="mb-2">Stratégiste</li>
                        <li class="mb-2">Créateur d'Univers</li>
                        <li class="mb-2">Maître des Combats</li>
                    </ul> #}
                </div>
            </div>
        </div>

        <div class="col-span-4 sm:col-span-9">
            <div class="bg-white shadow rounded-lg p-6">
                <h2 class="text-xl font-bold mb-4">À propos de moi</h2>
                <p class="text-gray-700">{{ app.user.bio ? app.user.bio : 'Pas de biographie disponible' }}</p>

                <h2 class="text-xl font-bold mt-6 mb-4">Mon expérience dans les jeux de rôle</h2>
                <div class="mb-6">
                    {% for jdr in app.user.groupeJDRs %}
                        <div class="mb-4">
                            <div class="flex justify-between flex-wrap gap-2 w-full">
                                <span class="text-gray-700 font-bold">Campagne : {{ jdr.title }}</span>
                                <p>
                                    <span class="text-gray-700 mr-2">Rôle : {{ jdr.owner.id == app.user.id ? 'Maître du Jeu' : 'Joueur' }}</span>
                                    {# <span class="text-gray-700">{{ jdr.startDate ? jdr.startDate|date('Y') : 'Date inconnue' }} - {{ jdr.endDate ? jdr.endDate|date('Y') : 'Présent' }}</span> #}
                                </p>
                            </div>
                            <p class="mt-2">{{ jdr.description|length > 0 ? jdr.description : 'Description indisponible' }}</p>
                        </div>
                    {% else %}
                        <p class="text-center text-gray-500">Pas encore de campagnes associées.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
