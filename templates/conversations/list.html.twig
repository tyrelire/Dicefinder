{% extends 'base.html.twig' %}

{% block title %}Mes Conversations{% endblock %}

{% block body %}
<div class="container mx-auto py-8 px-4">
    <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Mes Conversations</h1>

    {% if conversations|length > 0 %}
        <div class="bg-white shadow-md rounded-lg p-6">
            <ul class="space-y-4">
                {% for conversation in conversations %}
                    <li class="flex items-center justify-between p-4 bg-gray-50 rounded-lg shadow-sm transition duration-200 hover:bg-gray-100 hover:shadow-md">
                        <div class="flex items-center">
                            <img src="{{ conversation.avatar }}" alt="{{ conversation.user }}" class="h-10 w-10 rounded-full object-cover mr-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">{{ conversation.user }}</h3>
                                <p class="text-sm text-gray-500">
                                    Dernier message : 
                                    {% if conversation.lastMessage %}
                                        {{ conversation.lastMessage.message }}
                                    {% else %}
                                        Aucun message
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                        <a href="{{ path('chat', {'toUser': conversation.user}) }}" class="text-blue-500 hover:text-blue-600 transition duration-200">
                            Voir la conversation
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% else %}
        <p class="text-center text-gray-500">Vous n'avez aucune conversation active.</p>
    {% endif %}

    <div class="mt-8 flex justify-center">
        <a href="{{ path('chat') }}" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full shadow-lg transition duration-200">
            DÃ©marrer une nouvelle conversation
        </a>
    </div>
</div>
{% endblock %}
